✅ Product Definition Requirements – NestMap (Finalized)
Product Name:
NestMap – Plan. Pin. Wander.

1. Product Summary
NestMap is a collaborative trip planning app that helps users build time-blocked, location-aware daily itineraries using a visual map-based layout. It intelligently pins locations from names, calculates travel time between stops, and offers OpenAI-powered suggestions and summaries.

2. Core Features
2.1 Smart Itinerary Builder
Day-by-day timeline layout (drag-and-drop)

Stops include: title, time, location name, notes, tags

Tags like 🎨 Culture, 🍴 Food, 🎭 Event, 💆‍♀️ Rest

Assign stops to collaborators (e.g., “Patricia – tickets”)

2.2 Map Auto-Pinning + Routing
Uses Mapbox free tier

Type a stop like "Chelsea Market" → auto-pins on map

Visual routing between stops (walk, drive, transit*)

Distance + duration estimated between stops

Flag tight connections with warning color or alert

2.3 OpenAI Assistant Features
🧠 Summarize daily plan

📍 Suggest food/coffee near specific stops

🕒 Detect time conflicts

🎨 Generate themed itineraries (e.g., "Half-day art trip in Chelsea")

✨ Trip chatbot to handle planning Q&A in natural language

2.4 Collaboration
Invite users as Viewer / Editor / Commenter

Real-time syncing via backend (Supabase recommended)

Track assigned tasks and updates per user

2.5 Save, Duplicate, and Export
Save completed trips to history

Duplicate trips for future reuse

Export to PDF or shareable link

3. Tech Infrastructure
Frontend:
React + Tailwind (mobile-first UI)

Hosted via Vercel or Replit (Hacker/Pro) during dev

Backend:
Node.js + Express

Custom API routes for:

OpenAI queries

Mapbox proxying (to hide API keys)

Hosted on Render or Railway (free or low-cost)

Database:
Supabase (PostgreSQL) – trip data, users, itinerary items

Real-time sync (if needed), public/private trips

APIs:
Mapbox

Geocoding (location → lat/lng)

Directions API for routing

Static/interactive map tiles

OpenAI (GPT-4o or 3.5)

Summarization, suggestion, Q&A

All calls go through backend route

Security:
All secrets (.env): MAPBOX_TOKEN, OPENAI_API_KEY, SUPABASE_URL, SUPABASE_ANON_KEY

No frontend exposure of API keys

Basic auth/login via Supabase Auth (email/password or social login)

4. Future Features
Weather-based trip adjustments

Budget tracking or cost estimation

Reservation imports (Gmail → trip items)

Mobile PWA support

Calendar sync

5. Key Assumptions
Area	Choice
Maps	✅ Mapbox (free, flexible)
AI	✅ OpenAI via backend
Hosting	✅ Replit (dev), Vercel/Render (prod)
DB	✅ Supabase
Auth	✅ Supabase Auth

6. Success Metrics
% of users completing a full itinerary

of stops per trip
OpenAI usage rate per session

Engagement with time conflict warnings

of trips shared or duplicated
